<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Профиль - Dwanye Cinema</title>
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">

</head>
<body>
    <header>
        <div class="upper_nav">
            <div class="logo">
                <a href="../index.html" class="logo_link"><img class="logo_img" src="../imgs/fluent-emoji-flat--rock.svg"
                        alt="logo" /></a>
            </div>
            <div class="search_bar">
                <select class="search-filter">
                    <option value="all">All</option>
                    <option value="popular">Popular</option>
                    <option value="recommended">Recommended</option>
                </select>
                <div class="input_button">
                    <img src="../imgs/ic--sharp-search.svg" alt="search" loading="lazy" decoding="async" class="search_icon" />
                </div>
                <input class="search" placeholder="Search..." type="text" name="search" data-i18n="search.placeholder" />
            </div>
            <div class="nav_block">
                <div class="city_change">
                    <svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <g class="icon-group">
                            <path class="icon-path" d="M19 10.3636C19 16.0909 12 21 12 21C12 21 5 16.0909 5 10.3636C5 8.41068 5.7375 6.53771 7.05025 5.15676C8.36301 3.77581 10.1435 3 12 3C13.8565 3 15.637 3.77581 16.9497 5.15676C18.2625 6.53771 19 8.41068 19 10.3636Z" />
                            <path class="icon-path" d="M12 12C13.1046 12 14 11.1046 14 10C14 8.89543 13.1046 8 12 8C10.8954 8 10 8.89543 10 10C10 11.1046 10.8954 12 12 12Z" />
                        </g>
                    </svg>
                    <div class="city_name">Astana</div>
                    <div class="city-dropdown"></div>
                </div>
                <div class="lang_change">
                    <img alt="lang" src="../imgs/ic--baseline-language.svg" decoding="async" class="lang_icon">
                    <span class="current-lang">Rus</span>
                    <div class="lang-dropdown">
                        <div class="lang-option" data-lang="ru">Rus</div>
                        <div class="lang-option" data-lang="en">Eng</div>
                        <div class="lang-option" data-lang="kk">Kaz</div>
                    </div>
                </div>
                <div class="phone">
                     <a href="tel:+770100000000">
                    <img src="../imgs/streamline-flex--phone-solid.svg" alt="phone" loading="lazy" decoding="async" class="phone_icon">
                    </a>
                </div>
                <div class="menu">
                    <div class="menu_block">
                        <div class="line_1"></div>
                        <div class="line_2"></div>
                        <div class="line_3"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="navbartop">
            <nav>
                <a href="../index.html" class = "nav-link" data-i18n="header.main">Главная</a>
                <a href="./catalog.html" class = "nav-link" data-i18n="header.films">Фильмы</a>
                <a href="./contacts.html" class = "nav-link" data-i18n="header.cinemas">Кинотеатры</a>
                <a href="./about.html" class = "nav-link" data-i18n="header.about">О нас</a>
                <a href="./profile.html" class="active nav-link" data-i18n="header.cabinet">Личный кабинет</a>
                <a href="./bin.html" class = "nav-link" data-i18n="bin.login">Вход</a>
            </nav>
        </div>
    </header>

    <!-- Side Menu -->
    <div class="menu-overlay"></div>
    <div class="side-menu">
        <button class="side-menu-close">✖</button>
        <nav>
            <a href="../index.html" class = "nav-link" data-i18n="header.main">Главная</a>
            <a href="./catalog.html" class = "nav-link" data-i18n="header.films">Фильмы</a>
            <a href="./contacts.html" class = "nav-link" data-i18n="header.cinemas">Кинотеатры</a>
            <a href="./about.html" class = "nav-link" data-i18n="header.about">О нас</a>
            <a href="./profile.html" class = "nav-link" data-i18n="header.cabinet">Личный кабинет</a>
            <a href="./bin.html" class = "nav-link" data-i18n="bin.login">Вход</a>
        </nav>
    </div>

    <main class="container" style="min-height: 60vh;">
        <div class="profile-container">
            <div class="profile-header">
                <h1 data-i18n="bin.title">Личный кабинет</h1>
                <p class="welcome-msg"><span data-i18n="bin.welcome">Добро пожаловать, </span> <strong id="user-name">User</strong>!</p>
            </div>
            
            <div class="profile-grid">
                <!-- User Info & Loyalty -->
                <div class="profile-card user-info-card">
                    <h2>Профиль</h2>
                    <div class="profile-details">
                        <p><span data-i18n="bin.name">Имя</span>: <strong id="display-name"></strong></p>
                        <p><span data-i18n="bin.email">Email</span>: <strong id="display-email"></strong></p>
                        <hr>
                        <h3>Bonus Club</h3>
                        <p>Ваши баллы: <strong style="color: #ff7a00; font-size: 1.2em;">1250</strong></p>
                        <p>Статус: <strong>Gold</strong></p>
                    </div>
                </div>

                <!-- Settings -->
                <div class="profile-card settings-card">
                    <h2>Настройки</h2>
                    <form onsubmit="event.preventDefault(); alert('Saved!');">
                        <div class="form-group">
                            <label>Сменить пароль</label>
                            <input type="password" placeholder="Новый пароль">
                        </div>
                        <div class="form-group checkbox-group">
                            <input type="checkbox" id="sub-news" checked>
                            <label for="sub-news">Получать новости</label>
                        </div>
                        <button class="btn btn-primary btn-sm">Сохранить</button>
                    </form>
                </div>

                <!-- Purchase History -->
                <div class="profile-card history-card" style="grid-column: 1 / -1;">
                    <h2>История покупок</h2>
                    <div class="history-list">
                        <div class="history-item">
                            <div class="history-date">10.02.2025</div>
                            <div class="history-info">
                                <strong>Казнить нельзя помиловать</strong><br>
                                2 билета, Ряд 5, Места 10-11
                            </div>
                            <div class="history-price">3000 ₸</div>
                        </div>
                        <div class="history-item">
                            <div class="history-date">05.02.2025</div>
                            <div class="history-info">
                                <strong>Микки 17</strong><br>
                                1 билет, Ряд 8, Место 4
                            </div>
                            <div class="history-price">1600 ₸</div>
                        </div>
                         <div class="history-item">
                            <div class="history-date">28.01.2025</div>
                            <div class="history-info">
                                <strong>Попкорн (L), Кола (0.5)</strong><br>
                                Бар
                            </div>
                            <div class="history-price">2100 ₸</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="btn-logout" onclick="window.authSystem.logoutUser()" data-i18n="bin.logout">Выйти</button>
        </div>
    </main>

    <footer class="site-footer">
        <div class="footer-top">
            <a href="../index.html" class="footer-logo nav-link">
                <img src="../imgs/fluent-emoji-flat--rock.svg" alt="logo">
            </a>

            <div class="footer-socials">
                <a href="https://www.instagram.com" target="_blank" class="social-link">Instagram</a>
                <a href="https://www.youtube.com" target="_blank" class="social-link">YouTube</a>
                <a href="https://wa.me/770100000000" target="_blank" class="social-link">WhatsApp</a>
            </div>

            <div class="footer-phone">
                <a href="tel:+770100000000">+7 701 000 00 00</a>
            </div>
        </div>

        <p class="footer-copy" data-i18n="footer.rights">(c) 2025 Компания «томерлошечки». Все права защищены.</p>
    </footer>

    <script src="../js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const AS = window.authSystem;
            
            // Redirect if not logged in - REMOVED for Guest View
            // if (!AS.currentUser) { ... }

            // Populate data
            document.getElementById("user-name").textContent = AS.currentUser.name;
            document.getElementById("display-name").textContent = AS.currentUser.name;
            document.getElementById("display-email").textContent = AS.currentUser.email;

            // Update translations
            updateUI(); 
        });
        // переделать
    </script>
</body>
</html>
